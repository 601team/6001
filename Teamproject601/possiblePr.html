<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <title>PossibleConsult</title>
</head>
<body>
    <div class="p-5 mb-6 bg-secondary">
        <div class="container-fluid py-5">
            <div style="padding-left: 45px;">
                <div class="row">
                    <div class="col-11">
                        <h1 class="display-5 fw-bold" style="color:wheat">상담 예약</h1>
                    </div>
                    <div class="col">
                        <div style="padding:16px 0px">
                            <button type="button" class="btn btn-light" class="button-success pure-button button-xlarge" onClick="mailClick()">Send</button>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    
        <div style="padding-top:30px">
            <div class="p-4 mb-5 bg-light rounded-3">
                <div class="container-fluid py-5">
    
                    <div class="col">
                        <table class="table table-striped" id='proTable'>
                            <tbody>
                                <tr>
                                    <td>교수명</td>
                                    <td>전공</td>
                                    <td>연구실</td>
                                    <td>이메일</td>
                                </tr>
                            </tbody>
                        </table>
                        </div>

                        <br>
                        <br>
                        
            
                        <div class="col">
                        <table class="table table-striped" id='ConTimeTable'>
                            <tbody>
                            <tr>
                                <td>상담 가능 요일</td>  
                                <td>상담 가능 시간</td>
                                <td>예약하기</td>
                            </tr>
                        </tbody>
                        </table>
                        </div>
    
                </div>
        
        </div>

       
          
        </div>
            

        <form class="gform pure-form pure-form-stacked" method="POST" target="iframe1" data-email="jbh092917@gmail.com"
        action="https://script.google.com/macros/s/AKfycbz4xuRjA068z2NWSGJ-nQx82vcS9uXVrL63Xt3YPGmTI_1f-FYr6EFV_ib3nNllrvMUfQ/exec">
            <!-- change the form action to your script url -->

            <div class="form-elements">
            <input type="hidden" id="consult_day" name="consult_day"/>
            <input type="hidden" id="consult_time" name="consult_time"/>
            <input type="hidden" id="site" name="site_link"/>

            
            </div>
        </form>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
        <script data-cfasync="false" src="form-submission-handler.js"></script>
        <iframe id="iframe1" name="iframe1" style="display:none"></iframe>
        </body>
    </div>
    
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-analytics.js";
      import { getDatabase,ref, set } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-database.js";
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyAVjfBhilux_3BIyx486cRR2dsybsseKA8",
        authDomain: "team-a5651.firebaseapp.com",
        databaseURL: "https://team-a5651-default-rtdb.firebaseio.com",
        projectId: "team-a5651",
        storageBucket: "team-a5651.appspot.com",
        messagingSenderId: "804446190852",
        appId: "1:804446190852:web:0c224d3c24ade8b792e451"
      };
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);

      
      function writeUserData() {
        const db = getDatabase();
        const reference = ref(db, 'users/'+'아이디');

        set(reference, {
            consult_date: sessionStorage.getItem("cDate"),
            consult_time: sessionStorage.getItem("cTime")
        })
      }
      
      writeUserData();

    </script>

    <script src="https://smtpjs.com/v3/smtp.js">
    </script>
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="searchPr.js"></script>
    <script>
      function mailClick(){
        //console.log("불러옴:"+sessionStorage.getItem('cDate'));
        document.getElementById('consult_day').value=sessionStorage.getItem("cDate");
        document.getElementById('consult_time').value=sessionStorage.getItem("cTime");
        document.getElementById('site').value="https://www.naver.com/";
      }
    </script>
</html>